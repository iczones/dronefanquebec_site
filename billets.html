<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Festival Drone Fan Qu√©bec 2025 - Billets</title>
    <style>
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 0;
            background-color: #212121;
        }

        .card {
            margin: 24px 20px;
            background-color: #f7f7f7;
            border-radius: 20px;
            box-shadow: 0 2px 12px #00000014;
            overflow: hidden;
        }
    </style>
    <script>
        (function() {
            const isScriptLoaded = () => !!window.hiEventWidgetLoaded;

            const loadWidget = () => {
                window.hiEventWidgetLoaded = true;

                let scriptOrigin = "https://app.hi.events";

                const widgets = document.querySelectorAll(".hievents-widget");
                widgets.forEach((widget, index) => {
                    const eventId = widget.getAttribute("data-hievents-id");
                    if(!eventId) {
                        console.error("HiEvent widget error: data-hievents-id is required");
                        return;
                    }

                    const iframe = document.createElement("iframe");
                    iframe.setAttribute("sandbox", "" +
                        "allow-forms" +
                        " allow-scripts" +
                        " allow-same-origin" +
                        " allow-popups" +
                        " allow-popups-to-escape-sandbox" +
                        " allow-top-navigation" +
                        " allow-top-navigation-by-user-activation" +
                        " allow-downloads" +
                        " allow-modals" +
                        " allow-orientation-lock" +
                        " allow-pointer-lock" +
                        " allow-popups-to-escape-sandbox" +
                        " allow-presentation",
                    );

                    iframe.setAttribute("title", "Event Widget");
                    iframe.style.border = "none";
                    iframe.style.width = "100%";

                    const iframeId = `hievents-iframe-${index}`;
                    iframe.id = iframeId;

                    let src = `${scriptOrigin}/widget/${encodeURIComponent(eventId)}?iframeId=${iframeId}&`;
                    const params = [];
                    Array.from(widget.attributes).forEach(attr => {
                        if(attr.name.startsWith("data-hievents-") && attr.name !== "data-hievents-id") {
                            const paramName = attr.name.substring(13).replace(/-([a-z])/g, (g) => g[1].toUpperCase());
                            params.push(`${paramName}=${encodeURIComponent(attr.value)}`);
                        }
                    });

                    iframe.src = src + params.join("&");

                    widget.appendChild(iframe);

                    const autoResize = widget.getAttribute("data-hievents-autoresize") !== "false";

                    if(autoResize) {
                        window.addEventListener("message", (event) => {
                            if(event.origin !== scriptOrigin) {
                                return;
                            }

                            const {type, height, iframeId: messageIframeId} = event.data;
                            if(type === "resize" && height && messageIframeId === iframeId) {
                                const targetIframe = document.getElementById(messageIframeId);
                                if(targetIframe) {
                                    targetIframe.style.height = `${height}px`;
                                }
                            }
                        });
                    }
                });
            };

            if(document.readyState === "loading") {
                document.addEventListener("DOMContentLoaded", loadWidget);
            } else {
                if(!isScriptLoaded()) {
                    loadWidget();
                }
            }
        })();
    </script>
  </head>
  <body class="container">
    <div class="card">
      <div data-hievents-id="839" data-hievents-primary-color="#a42c2c" data-hievents-primary-text-color="#212121"
           data-hievents-secondary-color="#a42c2c" data-hievents-secondary-text-color="#ffffff"
           data-hievents-background-color="#f7f7f7" data-hievents-widget-type="widget"
           data-hievents-widget-version="1.0"
           data-hievents-locale="fr" data-hievents-padding="20px" data-hievents-autoresize="true"
           data-hievents-continue-button-text="Continuer" class="hievents-widget"></div>
    </div>
  </body>
</html>